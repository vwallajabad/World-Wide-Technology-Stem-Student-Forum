<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CyberBuddy | Chat</title>
    <link rel="stylesheet" href="chatbot.css">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://unpkg.com/typewriter-effect@2.3.1/dist/core.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-analytics.js"></script>
</head>

<body>
    <h1 id="header"></h1>
    
    <div class="chat-container" id="chatbot-container">
        <div class="messages" id="messages"></div>
        <div class="input-container">
            <input type="text" id="userInput" placeholder="Message CyberBuddy...">
            <button onclick="sendMessage()">Send</button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            console.log("DOM fully loaded and parsed");

            function getURLParameter(name) {
                const urlParams = new URLSearchParams(window.location.search);
                return urlParams.get(name);
            }

            function decodeURL() {
                let encodedText = document.getElementById("encodedInput")?.value;
                if (encodedText) {
                    let decodedText = decodeURIComponent(encodedText);
                    let messagesElement = document.getElementById("messages");
                    if (messagesElement) {
                        messagesElement.innerHTML = decodedText;
                    }
                }
            }

            window.onload = function () {
                let urlText = getURLParameter('text');
                if (urlText) {
                    let decodedText = decodeURIComponent(urlText);
                    document.getElementById("messages").innerHTML = decodedText;
                }
            };

            if (window.firebase) {
                firebase.analytics();
            }
        });
    </script>

    <script src="chatbot.js"></script>
</body>

</html>
